(function(){"use strict";const c=(o,g)=>{const h=e=>{let t=0,r=255*255*3;for(let n=0;n<s.length;n++){const l=u(e,s[n]);l<r&&(r=l,t=n)}return t},d=e=>{const t=(n,l)=>({red:n.red+l.red,blue:n.blue+l.blue,green:n.green+l.green}),r=e.reduce(t,{red:0,blue:0,green:0});return{red:r.red/e.length,blue:r.blue/e.length,green:r.green/e.length}},u=(e,t)=>(e.red-t.red)**2+(e.blue-t.blue)**2+(e.green-t.green)**2,i=(e,t)=>{const r=Math.ceil(e.length/t);return Array.from({length:r}).map((n,l)=>e.slice(l*t,(l+1)*t))};let a=g.data.flat().map(e=>({rgb:e,class:0,notChange:!0})),s=Array.from({length:o},()=>a[Math.floor(Math.random()*a.length)].rgb);for(let e=0;e<100&&(console.log(e),a=a.map(t=>{const r=h(t.rgb);return{rgb:t.rgb,notChange:r===t.class,class:r}}),!a.every(t=>t.notChange));e++)s=s.map((t,r)=>d(a.filter(n=>n.class===r).map(n=>n.rgb)));return{classList:s.map((e,t)=>({rgb:{red:Math.floor(e.red),green:Math.floor(e.green),blue:Math.floor(e.blue)},matchLength:a.filter(r=>r.class===t).length})),rgb2dListKMean:{data:i(a.map(e=>s[e.class]),g.width),width:g.width,height:g.height}}};addEventListener("message",o=>{console.log(o.data),postMessage(c(o.data.divNum,o.data.rgbList))})})();
